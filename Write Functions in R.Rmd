---
Title: Writing Functions in R
output: rmarkdown::github_document
---

Functions allow you to reuse code, without re-writing the lines of code to do similar tasks. You may simply call the function anywhere else in the main program. There are a few steps to write a function. First, you will need to determine the reason for writing the function, and thereafter define data and features required to incorporate into the program. Finally do the steps or calculation required, and return the output. 

In this case, we will create a simple function for re-charting bar graph. 

```{r}
#Load ggplot2 library to build bar graph visualization
library(ggplot2)
```

```{r}
#Load built-in dataset 
data(mtcars)

#View top 6 rows of the dataset
head(mtcars)
```
```{r}
#View structure of the dataset
str(mtcars)
```

This function will output the bar graph required, by calling the list of argument names within the brackets. 

```{r}
bar_graph <- function(data, column, colfill, xaxis, fill_title, main_title){
    ggplot(data, aes(.data[[column]], group=.data[[colfill]],fill=.data[[colfill]]), inherit.aes=F)+
        geom_bar(mapping=aes(x=.data[[column]], y=..prop.., group=.data[[colfill]], fill=.data[[colfill]]),
                 position=position_dodge2(preserve = "single"), stat="count")+
        geom_text(aes(y=..prop.., label=scales::percent(..prop..)), stat="count",
                  position=position_dodge(0.8), vjust=-0.5, size=3)+
        scale_y_continuous(labels = scales::percent_format(), limit=c(0,1))+
        labs(x = xaxis, y="Percentage", fill=fill_title, title=main_title)+
    theme_dark()
}
```

This is simply to convert numeric data type to factor, so it will appear as consistent color for each data value instead of different color grading/scaling. 

```{r}
mtcars$cyl <- as.factor(mtcars$cyl)
mtcars$am <- as.factor(mtcars$am)
```

Call out the function, by inputing the parameters. 

```{r}
bar_graph(mtcars, 'cyl', 'am', 
          "Number of Cylinders", 
          "Transmission",
          "% Distribution of Number of Cylinders by Transmission")
```





